# [개념명] 사용자별 전자결재 시스템 흐름 정리 - GLOVIS E-Doc (파일 기반 보완)

> 📄 **출처 파일**  
- `e-Doc 시스템 구성도_기능리스트.pdf`  
- `글로비스 북미 전자결재 시스템 구성도 & 기능리스트.pdf`  
- `eDoc_Infra Architecture Design Diagram.pdf`  
- `시스템 사용자 매뉴얼.pdf`

---

## 1. 일반 사용자 (End User)

```plaintext
┌────────────────────────────┐
│ SAP 문서 생성 (Parked/Posted) │  ← 출장비, 법인카드, 세금계산서 등
└─────────────┬────────────┘
              ↓
┌────────────────────────────┐
│ 전표생성 요청 데이터 포함 가능     │ ← `시스템 구성도.pdf`, `기능리스트.pdf` 참조
└─────────────┬────────────┘
              ↓
┌────────────────────────────────────────┐
│ 자동 인터페이스 (5분 주기, ZUSFIV9110 문서 유형 기준) │ ← `시스템 사용자 매뉴얼.pdf`
└─────────────┬────────────────────────┘
              ↓
┌────────────────────────────────┐
│ e-Doc 문서함 접속 및 결재 요청 준비      │
└─────────────┬────────────────┘
              ↓
┌────────────────────────────┐
│ 전자증빙 등록 (영수증, 첨부 파일 등)       │ ← `기능리스트.pdf` 전자증빙 관리 기능
└─────────────┬────────────┘
              ↓
┌────────────────────┐
│ 결재선 설정 및 결재 요청 등록 │ ← 결재선 자동 추천: `인사정보 마스터`
└────────────────────┘
```

---

## 2. 결재자 (Approver)

```plaintext
┌────────────────────────────────┐
│ e-Doc 알림 or 문서함 접속               │
└─────────────┬────────────────┘
              ↓
┌────────────────────────────────┐
│ 문서 상세 확인 (본문 + 전자증빙 + SAP 전표) │ ← `기능리스트.pdf`, `구성도.pdf`
└─────────────┬────────────────┘
              ↓
     ┌──────────────┐      ┌─────────────┐
     │  결재 승인   │◄────→│  결재 반려  │
     └────┬─────────┘      └────┬────────┘
          ↓                        ↓
┌────────────────────────────┐     ┌────────────────────────────┐
│ 다음 결재자에게 전달             │     │ 최초 작성자에게 반환             │
└────────────────────────────┘     └────────────────────────────┘
          ↓
┌────────────────────────────────────────────┐
│ 최종 승인 시 e-Doc 승인 데이터에 이력 저장         │ ← `기능리스트.pdf` 승인 이력 저장
└────────────────────────────────────────────┘
          ↓
┌────────────────────────────────────────────┐
│ 문서 유형이 Parked이면 → SAP에 기장(Posted 처리) │ ← `시스템 구성도.pdf`
└────────────────────────────────────────────┘
```

---

## 3. 재무 관리자 (FI Admin)

```plaintext
┌──────────────────────────────────────┐
│ SAP 접속 → T-Code: ZUSFIV9110 입력         │ ← `사용자 매뉴얼.pdf`
└─────────────┬────────────────────────┘
              ↓
┌────────────────────────────────────┐
│ I/F 문서 유형 등록 (결재 대상 전표 등록)        │ ← 인터페이스 설정 기준
└─────────────┬──────────────────────┘
              ↓
┌────────────────────────────────────────────┐
│ E-Doc 마스터 관리 (G/L, 고객, 구매처 정보 미러링) │ ← `구성도.pdf`, `기능리스트.pdf`
└─────────────┬────────────────────────────┘
              ↓
┌────────────────────────────────────────┐
│ 전표생성 요청 데이터 흐름 점검 (결재 완료 후 SAP 반영용) │ ← `시스템 구성도.pdf`
└────────────────────────────────────────┘
```

---

## 4. 시스템 운영자 (System Admin)

```plaintext
┌────────────────────────────────────────────┐
│ e-Doc Web 서버 구성 (RedHat + Tomcat 기반)      │ ← `Infra Architecture Design Diagram.pdf`
└─────────────┬────────────────────────────┘
              ↓
┌────────────────────────────────────────────┐
│ e-Doc DB 구성 (MariaDB, PRD/STG/DEV 분리)       │ ← `Infra Architecture Design Diagram.pdf`
└─────────────┬────────────────────────────┘
              ↓
┌────────────────────────────────────────────┐
│ SAP ↔ e-Doc 연동 방식 구성 (API / IDoc / RFC)    │
└─────────────┬────────────────────────────┘
              ↓
┌────────────────────────────────────────┐
│ 인터페이스 실패 로그 모니터링 (5분 주기 자동 처리) │ ← `시스템 구성도.pdf`
└─────────────┬────────────────────────┘
              ↓
┌────────────────────────────────────────────┐
│ 수동 재처리 or Interface Queue 재전송 (예: Kafka) │ ← `Infra Architecture.pdf` 큐 재처리 언급
└────────────────────────────────────────────┘
```

---

## 5. 전체 흐름 요약

```plaintext
[SAP 사용자]
  → SAP 문서 생성 (Parked or Posted)
       ↓
[자동 인터페이스] ← ZUSFIV9110에 등록된 문서 유형만 전송됨
       ↓
[e-Doc 사용자]
  → 문서함 진입 → 전자증빙 등록 → 결재 요청
       ↓
[결재자]
  → 승인 or 반려 → 최종 승인 시 기록 저장 + SAP 반영 (Parked만)
       ↓
[FI 관리자]
  → 문서 유형 관리 + 마스터 동기화 + 반영 여부 확인
       ↓
[System Admin]
  → 시스템 구성 및 연동 장애 모니터링 및 복구 처리
```

---

## ✅ 실제 시스템에서 반영된 구성요소 (출처 기반 요약)

| 구성 요소 | 출처 문서 | 설명 |
|-----------|-----------|------|
| 전자증빙 등록 | `기능리스트.pdf` | 사용자가 결재 요청 시 첨부파일을 등록함 |
| 전표생성 요청 데이터 | `시스템 구성도.pdf` | 결재 승인 후 SAP 전표 생성을 트리거할 수 있음 |
| 승인 데이터 | `기능리스트.pdf` | e-Doc에 최종 승인 상태가 기록됨 |
| G/L, 고객, 구매처 마스터 | `구성도 & 기능리스트.pdf` | SAP 마스터를 별도로 복제/사용 |
| MariaDB, Tomcat | `Infra Architecture Design Diagram.pdf` | e-Doc 시스템은 MariaDB + Tomcat 환경으로 구성됨 |
| 인터페이스 실패 처리 | `시스템 구성도.pdf` | 로그 기록 및 재처리 절차 정의됨 |

