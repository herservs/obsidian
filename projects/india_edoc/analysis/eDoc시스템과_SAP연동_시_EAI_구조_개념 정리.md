# [개념명] eDoc 시스템에서의 SAP 연동과 EAI 구조 개념 정리

---

## 1. 용어 정의

| 용어 | 의미 |
|------|------|
| **eDoc** | 현재 개발 중인 통합전자결재시스템 |
| **SAP** | 전사적 자원관리(ERP) 시스템으로, 회계 전표(FI) 처리를 담당 |
| **EAI** | Enterprise Application Integration: 서로 다른 시스템을 연결하는 **중간 연동 계층 또는 미들웨어** |
| **RFC** | Remote Function Call: SAP의 원격 함수 호출 방식 |
| **JCo** | SAP Java Connector: Java에서 SAP RFC를 호출하기 위한 SAP 공식 라이브러리 (`sapjco3.jar`) |

---

## 2. SAP 연동 구조 유형

### ✅ CASE 1. EAI가 "중간 시스템(티어)"인 경우

```text
[eDoc 시스템]  
   ↓ (HTTP, MQ 등)
[EAI 서버 (예: SAP PI/PO, WebMethods)]  
   ↓ (RFC)
[SAP 시스템]
```

- **EAI는 미들웨어** 역할 (포맷 변환, 재처리, 모니터링, 큐잉 제공)
- SAP와 직접 연결하지 않고 **EAI가 SAP 호출을 위임**
- `EAI_DEST`는 EAI 서버 또는 연결 구분자 의미로 사용
- **대기업에서 많이 채택하는 구조**

---

### ✅ CASE 2. EAI가 "논리적 개념"인 경우 (직접 연결 구조)

```text
[eDoc 시스템]  
   ↓ (JCo 직접)
[SAP 시스템]
```

- **EAI는 단순히 SAP 접속을 위한 설정 명칭**
- `EAI_DEST`: SAP JCo 접속 식별자  
- `EAI_ID`, `EAI_PW`: SAP 인터페이스 계정 정보
- SAP JCo를 통해 Function Module (`Z_POST_DOC` 등) 직접 호출
- **우리 시스템이 사용하는 현재 구조**

---

## 3. 우리 시스템에서의 실제 의미

| 키 값 | 설명 |
|-------|------|
| `EAI_DEST` | JCo에서 사용하는 SAP 접속 설정 명칭 (예: `"SAP_CONN"`) |
| `EAI_ID` | SAP 연동 전용 사용자 계정명 (예: `"eai_user"`) |
| `EAI_PW` | 위 계정의 비밀번호 (보통 암호화되어 있음) |
| 구조 유형 | **CASE 2 - SAP에 직접 연결하는 구조** (중간 EAI 서버 없음) |

---

## 4. 왜 중요한가?

- 회사에 따라 EAI가 **물리적인 서버**인지, **논리적인 구분자**인지 달라짐
- 연동 오류 처리, 인터페이스 모니터링, 재처리 등의 기능이 필요하다면
  → 향후 EAI를 **중간 티어로 확장**할 수 있음
- 현재는 단순화된 구조로 개발하되, 확장을 고려한 설계 필요

---

## 5. 결론

> 📌 현재 eDoc 시스템은 **SAP와 직접 연동하는 구조**이며,  
> 코드에 사용된 `EAI_DEST`, `EAI_ID` 등의 용어는  
> **SAP 접속 설정을 의미하는 논리적 개념**이다.  
> 하지만 향후 시스템 확장 시 **물리적인 EAI 계층** 도입도 고려 가능하다.

